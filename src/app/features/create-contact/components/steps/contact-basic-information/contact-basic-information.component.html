<form [formGroup]="form" (ngSubmit)="submit()">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <app-custom-input label="First name" formControlName="first_name" />
    </div>
    <div>
      <app-custom-input label="Last name" formControlName="last_name" />
    </div>
    <div>
      <app-custom-input
        type="date"
        label="Birthdate"
        formControlName="birthdate"
        [min]="minBirthdateDate()"
        [max]="maxBirthdateDate()"
      />
    </div>
    <div>
      <app-custom-input label="SSN/ITIN" formControlName="ssn" />
    </div>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
    <div formArrayName="emails" class="col-span-2">
      @for (control of form.controls.emails.controls; track $index) {
        <div [formGroup]="control" class="mb-5">
          <div class="flex gap-2">
            <app-custom-input
              type="email"
              label="Email"
              [id]="'email-' + $index"
              formControlName="email"
              class="grow"
            />
            @if (!$first) {
              <button (click)="removeEmail($index)" type="button">
                <img ngSrc="/assets/icons/trash-icon.svg" width="14" height="16" alt="Delete" />
              </button>
            }
          </div>
        </div>
      }
      <button
        type="button"
        (click)="addEmail()"
        class="px-2 text-sky-600 flex items-center justify-center border border-sky-600 rounded-md text-sm"
      >
        Add email
      </button>
    </div>
    <div formArrayName="phones" class="col-span-2">
      @for (control of form.controls.phones.controls; track $index) {
        <div [formGroup]="control" class="mb-5">
          <div class="flex gap-2">
            <app-phone-input formControlName="phone" class="grow" />
            @if (!$first) {
              <button (click)="removePhone($index)" type="button">
                <img ngSrc="/assets/icons/trash-icon.svg" width="14" height="16" alt="Delete" />
              </button>
            }
          </div>
        </div>
      }
      <button
        type="button"
        (click)="addPhone()"
        class="px-2 text-sky-600 flex items-center justify-center border border-sky-600 rounded-md text-sm"
      >
        Add phone
      </button>
    </div>
  </div>
  <div class="flex gap-4 justify-end mt-10 md:flex-row flex-col text-center max-md:w-full">
    <button class="items-center gap-2 bg-secondary px-4 py-2 rounded-lg text-white md:flex" type="submit">
      Continue
      <div class="relative size-5 shrink-0 hidden md:block">
        <img ngSrc="/assets/icons/arrow-right.svg" alt="Right" class="filter invert-[100%]" fill />
      </div>
    </button>
  </div>
</form>
