<section class="p-4">
  <div class="relative w-full mb-4">
    <div class="bg-stone-100 w-full flex h-11 items-center rounded-2xl px-4 gap-4">
      <div class="relative size-4 shrink-0">
        <img src="/assets/icons/search.svg" alt="Search" fill />
      </div>
      <input
        type="text"
        placeholder="Search banks..."
        class="bg-transparent grow h-full px-2 w-full"
        [(ngModel)]="searchTerm"
        (keyup.enter)="this.searchService.updateQuery(searchTerm)"
      />
    </div>
  </div>

  @if (loading()) {
    <div class="p-4 text-center">
      <div class="loader"></div>
    </div>
  } @else {
    <div class="max-h-96 overflow-y-auto">
      @for (bank of banks(); track bank.id) {
        <a
          class="p-3 hover:bg-gray-100 flex items-center gap-3 border-b border-dashed border-neutral-200 cursor-pointer"
          [ngClass]="selected().has(bank.id) ? 'bg-gray-200' : 'bg-white'"
          (click)="toggleSelection(bank)"
        >
          <div class="size-10 bg-primary rounded-lg text-white flex items-center justify-center uppercase text-sm">
            {{ bank.name | initials }}
          </div>

          <div class="flex-grow truncate">
            <div class="font-semibold truncate">{{ bank.name }}</div>
            @if (bank.manager) {
              <div class="text-sm text-gray-500 truncate">{{ bank.manager }}</div>
            }
          </div>
        </a>
      }
    </div>
  }

  @if (nothingFound()) {
    <p class="text-center py-4 text-gray-500">No banks found</p>
  }

  <div class="flex gap-4 justify-end md:flex-row flex-col text-center max-md:w-full mt-4">
    <button class="items-center gap-2 bg-zinc-200 px-4 py-2 rounded-lg" (click)="emitSelection(false)">Cancel</button>
    <button class="bg-secondary px-4 py-2 rounded-lg text-white" (click)="emitSelection()">Select</button>
  </div>
</section>
